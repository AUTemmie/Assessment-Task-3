{% extends 'layout.html' %} {% block content %}
<div class="chat-container">
  <h2>Chats</h2>

  <!-- Messages -->
  <div class="chat-box" id="chatBox">
    {% for sender, text, time in messages %}
    <div
      class="message {% if sender == session['username'] %}sent{% else %}received{% endif %}"
    >
      {% if sender != session['username'] %}
      <strong>{{ sender }}:</strong>
      {% endif %}
      <p>{{ text }}</p>
      <span class="time">{{ time }}</span>
    </div>
    {% endfor %}
  </div>

  <!-- Input -->
  <form class="chat-input" method="post" action="{{ url_for('send_message') }}">
    <input
      type="text"
      name="message"
      placeholder="Type a message..."
      required
      autocomplete="off"
    />
    <button type="submit">Send</button>
  </form>
</div>

<!-- Auto-scroll script -->
<script>
  // Always scroll chat to bottom after page load
  const chatBox = document.getElementById("chatBox");
  if (chatBox) {
    chatBox.scrollTop = chatBox.scrollHeight;
  }
</script>
{% endblock %}
